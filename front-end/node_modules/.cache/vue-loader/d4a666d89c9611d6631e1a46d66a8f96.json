{"remainingRequest":"D:\\actionPreview\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\actionPreview\\front-end\\src\\components\\pubInf\\moreInf\\studentInf.vue?vue&type=style&index=0&id=37a4f7b4&scoped=true&lang=css&","dependencies":[{"path":"D:\\actionPreview\\front-end\\src\\components\\pubInf\\moreInf\\studentInf.vue","mtime":1581757454181},{"path":"D:\\actionPreview\\front-end\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3N0dWRlbnRJbmZ7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7CiAgICBtaW4td2lkdGg6IDI1JTsKICAgIG1heC13aWR0aDogNjAlOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgoudGFibGUgewoKfQoKLmNvbC0yewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAxMHB4OwogICAgcmlnaHQ6IDQlOwp9CgouY29sLTN7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBib3R0b20gOiAxMHB4OwogICAgbGVmdDogNCU7Cn0K"},{"version":3,"sources":["studentInf.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2KA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"studentInf.vue","sourceRoot":"src/components/pubInf/moreInf","sourcesContent":["<template>\n    <div>\n        <Row class=\"searchBox\">\n            <Col >\n                <Input search placeholder=\"搜索活动信息（请输入活动标题)\" v-model=\"searchedInf\" />\n            </Col>\n        </Row>\n\n        <Row id=\"studentInf\" :style=\"{'height': boxHeight}\">\n            <Col >\n                <div ref=\"table\">\n                <Table border :columns=\"columnConfig\" :data=\"studentList\" class=\"table\" ref=\"selection\" ></Table>\n                </div>\n            </Col>\n            <Col class=\"col-2\">\n                <Button type=\"primary\" size=\"large\" @click=\"exportData\"><Icon type=\"ios-download-outline\"></Icon>导出所有学生信息</Button>\n            </Col>\n            <Col class=\"col-3\">\n                <Page :total=\"pageNum\" show-elevator @on-change=\"currentPage\"/>\n            </Col>\n        </Row>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"studentInf\",\n        props: [\"studentData\"],\n        data() {\n            return {\n                columnConfig: [\n                    {\n                        title: \"学生学号\",\n                        key: \"stdId\"\n                    },\n                    {\n                        title: \"学生名字\",\n                        key: \"stdName\"\n                    },\n                    {\n                        title: \"申请时间\",\n                        key: \"applyDate\"\n                    },\n                    {\n                        title: \"申请理由\",\n                        key: \"applyReason\",\n                        width: \"\",\n                        align: \"center\"\n                    },\n                    {\n                        type: 'selection',\n                        width: 60,\n                        align: 'center'\n                    }\n\n                ],\n                studentList: [],\n                configData: {\n                    originPageNum: 10, //缓存初始页数\n                    originStudentList: [] //缓存初始页面数据\n                },\n                searchedInf: \"\",\n                pageNum: 10,\n                boxHeight: \"\",\n                actionId: \"\", //这个至关重要，需要在请求的时候发出\n            }\n        },\n        methods: {\n            exportData() {\n                //这里进行请求，导出必须从后端导出\n\n            },\n\n            computingPages(totalPages) {\n                if (totalPages <= 5) //暂时先用三来代替\n                {\n                    return 10;\n                } else {\n                    return Math.ceil(totalPages / 5) * 10;//Math.ceil->向上取整\n                }\n            },\n\n            currentPage(page) {\n                console.log(this.searchedInf);\n                if(this.searchedInf === \"\")\n                {\n                    this.$request.get(\"/actInf/moreInf/page\", {\n                        params: {\n                            currentPage: page,\n                            actId: this.actionId\n                        }\n                    }).then(result => {\n                        console.log(result.data);\n                        this.studentList = result.data;\n                    }).catch(err => {\n                        console.log(err);\n                    })\n                }\n                else\n                {\n                    this.$request.get('/actInf/moreInf/search/page',{\n                        params : {\n                            searchedInf : this.searchedInf,\n                            currentPage : page,\n                            actionId : this.actionId\n                        }\n                    }).then((result) => {\n                        console.log(result.data);\n                        let middleData = result.data;\n                        this.pageNeedData.data1 = this.normalizingDate(middleData);\n                    }).catch((err) => {\n                        console.log(err);\n                    })\n                }\n            }\n        },\n        created() {\n            let screenWidth = document.documentElement.clientWidth;\n            let screenHeight = document.documentElement.clientHeight;\n            // console.log(screenHeight);\n\n            this.columnConfig[3].width = screenWidth * 0.25;//设置申请理由表格宽度\n            this.boxHeight = screenHeight * 0.8 + \"px\"; //设置本组件的高度\n\n        },\n        mounted() {\n            //下面是表格分页的设置 包括学生名单和页数\n            setTimeout(() => {\n                //下面是表格分页的设置 包括学生名单和页数\n                this.studentList = this.studentData.studentInf;\n                this.configData.originStudentList = [...this.studentList];//拷贝一份\n                this.pageNum = this.computingPages(this.studentData.studentsNum);//计算页数\n                this.configData.originPageNum = this.pageNum; //拷贝一份\n\n                this.actionId = this.studentData.studentInf[0].actionId;//设置活动Id，需要查询\n\n            }, 500); //设置时差，防止赋值失败。因为请求源是在父组件里\n\n        },\n        watch: { //实时搜索\n            searchedInf: function () {\n                let searchedInf = this.searchedInf;\n                if (searchedInf === null)//索引框为空的时候，不用请求，直接用本地缓存值\n                {\n                    console.log(this.configData.originPageNum);\n                    this.studentList = [...this.configData.originStudentList];\n                    this.pageNum = this.configData.originPageNum;\n                }\n                else\n                { //当索引框不为空的时候的请求\n                    this.$request.get(\"/actInf/moreInf/search\", {\n                        params: {\n                            actionId : this.actionId ,\n                            searchedInf: searchedInf\n                        }\n                    }).then((result) => {\n                        console.log(result.data);\n                        this.pageNum = this.computingPages(result.data.pageNum);//进行搜索页数计算\n                        this.studentList = result.data.searchedData;\n                    }).catch((err) => {\n                        console.log(err);\n                    })\n                }//else\n\n            }\n        }\n    }\n\n</script>\n\n<style scoped>\n#studentInf{\n    border: 1px solid red;\n    min-width: 25%;\n    max-width: 60%;\n    position: relative;\n}\n\n.table {\n\n}\n\n.col-2{\n    position: absolute;\n    bottom: 10px;\n    right: 4%;\n}\n\n.col-3{\n    position: absolute;\n    bottom : 10px;\n    left: 4%;\n}\n</style>"]}]}