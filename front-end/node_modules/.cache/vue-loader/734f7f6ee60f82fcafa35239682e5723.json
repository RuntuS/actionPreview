{"remainingRequest":"D:\\actionPreview\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\actionPreview\\front-end\\src\\components\\pubInf\\moreInf\\studentInf.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\actionPreview\\front-end\\src\\components\\pubInf\\moreInf\\studentInf.vue","mtime":1581757454181},{"path":"D:\\actionPreview\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\actionPreview\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJzdHVkZW50SW5mIiwKICAgIHByb3BzOiBbInN0dWRlbnREYXRhIl0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbHVtbkNvbmZpZzogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5a2m55Sf5a2m5Y+3IiwKICAgICAgICAgICAgICAgICAgICBrZXk6ICJzdGRJZCIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICLlrabnlJ/lkI3lrZciLAogICAgICAgICAgICAgICAgICAgIGtleTogInN0ZE5hbWUiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi55Sz6K+35pe26Ze0IiwKICAgICAgICAgICAgICAgICAgICBrZXk6ICJhcHBseURhdGUiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi55Sz6K+355CG55SxIiwKICAgICAgICAgICAgICAgICAgICBrZXk6ICJhcHBseVJlYXNvbiIsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICIiLAogICAgICAgICAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywKICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICBdLAogICAgICAgICAgICBzdHVkZW50TGlzdDogW10sCiAgICAgICAgICAgIGNvbmZpZ0RhdGE6IHsKICAgICAgICAgICAgICAgIG9yaWdpblBhZ2VOdW06IDEwLCAvL+e8k+WtmOWIneWni+mhteaVsAogICAgICAgICAgICAgICAgb3JpZ2luU3R1ZGVudExpc3Q6IFtdIC8v57yT5a2Y5Yid5aeL6aG16Z2i5pWw5o2uCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlYXJjaGVkSW5mOiAiIiwKICAgICAgICAgICAgcGFnZU51bTogMTAsCiAgICAgICAgICAgIGJveEhlaWdodDogIiIsCiAgICAgICAgICAgIGFjdGlvbklkOiAiIiwgLy/ov5nkuKroh7PlhbPph43opoHvvIzpnIDopoHlnKjor7fmsYLnmoTml7blgJnlj5Hlh7oKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGV4cG9ydERhdGEoKSB7CiAgICAgICAgICAgIC8v6L+Z6YeM6L+b6KGM6K+35rGC77yM5a+85Ye65b+F6aG75LuO5ZCO56uv5a+85Ye6CgogICAgICAgIH0sCgogICAgICAgIGNvbXB1dGluZ1BhZ2VzKHRvdGFsUGFnZXMpIHsKICAgICAgICAgICAgaWYgKHRvdGFsUGFnZXMgPD0gNSkgLy/mmoLml7blhYjnlKjkuInmnaXku6Pmm78KICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIDEwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0b3RhbFBhZ2VzIC8gNSkgKiAxMDsvL01hdGguY2VpbC0+5ZCR5LiK5Y+W5pW0CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBjdXJyZW50UGFnZShwYWdlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VhcmNoZWRJbmYpOwogICAgICAgICAgICBpZih0aGlzLnNlYXJjaGVkSW5mID09PSAiIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy4kcmVxdWVzdC5nZXQoIi9hY3RJbmYvbW9yZUluZi9wYWdlIiwgewogICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogcGFnZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWN0SWQ6IHRoaXMuYWN0aW9uSWQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3R1ZGVudExpc3QgPSByZXN1bHQuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZXF1ZXN0LmdldCgnL2FjdEluZi9tb3JlSW5mL3NlYXJjaC9wYWdlJyx7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zIDogewogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZEluZiA6IHRoaXMuc2VhcmNoZWRJbmYsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlIDogcGFnZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uSWQgOiB0aGlzLmFjdGlvbklkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgICAgICAgIGxldCBtaWRkbGVEYXRhID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlTmVlZERhdGEuZGF0YTEgPSB0aGlzLm5vcm1hbGl6aW5nRGF0ZShtaWRkbGVEYXRhKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGxldCBzY3JlZW5XaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgICBsZXQgc2NyZWVuSGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKICAgICAgICAvLyBjb25zb2xlLmxvZyhzY3JlZW5IZWlnaHQpOwoKICAgICAgICB0aGlzLmNvbHVtbkNvbmZpZ1szXS53aWR0aCA9IHNjcmVlbldpZHRoICogMC4yNTsvL+iuvue9rueUs+ivt+eQhueUseihqOagvOWuveW6pgogICAgICAgIHRoaXMuYm94SGVpZ2h0ID0gc2NyZWVuSGVpZ2h0ICogMC44ICsgInB4IjsgLy/orr7nva7mnKznu4Tku7bnmoTpq5jluqYKCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICAvL+S4i+mdouaYr+ihqOagvOWIhumhteeahOiuvue9riDljIXmi6zlrabnlJ/lkI3ljZXlkozpobXmlbAKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgLy/kuIvpnaLmmK/ooajmoLzliIbpobXnmoTorr7nva4g5YyF5ous5a2m55Sf5ZCN5Y2V5ZKM6aG15pWwCiAgICAgICAgICAgIHRoaXMuc3R1ZGVudExpc3QgPSB0aGlzLnN0dWRlbnREYXRhLnN0dWRlbnRJbmY7CiAgICAgICAgICAgIHRoaXMuY29uZmlnRGF0YS5vcmlnaW5TdHVkZW50TGlzdCA9IFsuLi50aGlzLnN0dWRlbnRMaXN0XTsvL+aLt+i0neS4gOS7vQogICAgICAgICAgICB0aGlzLnBhZ2VOdW0gPSB0aGlzLmNvbXB1dGluZ1BhZ2VzKHRoaXMuc3R1ZGVudERhdGEuc3R1ZGVudHNOdW0pOy8v6K6h566X6aG15pWwCiAgICAgICAgICAgIHRoaXMuY29uZmlnRGF0YS5vcmlnaW5QYWdlTnVtID0gdGhpcy5wYWdlTnVtOyAvL+aLt+i0neS4gOS7vQoKICAgICAgICAgICAgdGhpcy5hY3Rpb25JZCA9IHRoaXMuc3R1ZGVudERhdGEuc3R1ZGVudEluZlswXS5hY3Rpb25JZDsvL+iuvue9rua0u+WKqElk77yM6ZyA6KaB5p+l6K+iCgogICAgICAgIH0sIDUwMCk7IC8v6K6+572u5pe25beu77yM6Ziy5q2i6LWL5YC85aSx6LSl44CC5Zug5Li66K+35rGC5rqQ5piv5Zyo54i257uE5Lu26YeMCgogICAgfSwKICAgIHdhdGNoOiB7IC8v5a6e5pe25pCc57SiCiAgICAgICAgc2VhcmNoZWRJbmY6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IHNlYXJjaGVkSW5mID0gdGhpcy5zZWFyY2hlZEluZjsKICAgICAgICAgICAgaWYgKHNlYXJjaGVkSW5mID09PSBudWxsKS8v57Si5byV5qGG5Li656m655qE5pe25YCZ77yM5LiN55So6K+35rGC77yM55u05o6l55So5pys5Zyw57yT5a2Y5YC8CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29uZmlnRGF0YS5vcmlnaW5QYWdlTnVtKTsKICAgICAgICAgICAgICAgIHRoaXMuc3R1ZGVudExpc3QgPSBbLi4udGhpcy5jb25maWdEYXRhLm9yaWdpblN0dWRlbnRMaXN0XTsKICAgICAgICAgICAgICAgIHRoaXMucGFnZU51bSA9IHRoaXMuY29uZmlnRGF0YS5vcmlnaW5QYWdlTnVtOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgeyAvL+W9k+e0ouW8leahhuS4jeS4uuepuueahOaXtuWAmeeahOivt+axggogICAgICAgICAgICAgICAgdGhpcy4kcmVxdWVzdC5nZXQoIi9hY3RJbmYvbW9yZUluZi9zZWFyY2giLCB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbklkIDogdGhpcy5hY3Rpb25JZCAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaGVkSW5mOiBzZWFyY2hlZEluZgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VOdW0gPSB0aGlzLmNvbXB1dGluZ1BhZ2VzKHJlc3VsdC5kYXRhLnBhZ2VOdW0pOy8v6L+b6KGM5pCc57Si6aG15pWw6K6h566XCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHVkZW50TGlzdCA9IHJlc3VsdC5kYXRhLnNlYXJjaGVkRGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfS8vZWxzZQoKICAgICAgICB9CiAgICB9Cn0KCg=="},{"version":3,"sources":["studentInf.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"studentInf.vue","sourceRoot":"src/components/pubInf/moreInf","sourcesContent":["<template>\n    <div>\n        <Row class=\"searchBox\">\n            <Col >\n                <Input search placeholder=\"搜索活动信息（请输入活动标题)\" v-model=\"searchedInf\" />\n            </Col>\n        </Row>\n\n        <Row id=\"studentInf\" :style=\"{'height': boxHeight}\">\n            <Col >\n                <div ref=\"table\">\n                <Table border :columns=\"columnConfig\" :data=\"studentList\" class=\"table\" ref=\"selection\" ></Table>\n                </div>\n            </Col>\n            <Col class=\"col-2\">\n                <Button type=\"primary\" size=\"large\" @click=\"exportData\"><Icon type=\"ios-download-outline\"></Icon>导出所有学生信息</Button>\n            </Col>\n            <Col class=\"col-3\">\n                <Page :total=\"pageNum\" show-elevator @on-change=\"currentPage\"/>\n            </Col>\n        </Row>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"studentInf\",\n        props: [\"studentData\"],\n        data() {\n            return {\n                columnConfig: [\n                    {\n                        title: \"学生学号\",\n                        key: \"stdId\"\n                    },\n                    {\n                        title: \"学生名字\",\n                        key: \"stdName\"\n                    },\n                    {\n                        title: \"申请时间\",\n                        key: \"applyDate\"\n                    },\n                    {\n                        title: \"申请理由\",\n                        key: \"applyReason\",\n                        width: \"\",\n                        align: \"center\"\n                    },\n                    {\n                        type: 'selection',\n                        width: 60,\n                        align: 'center'\n                    }\n\n                ],\n                studentList: [],\n                configData: {\n                    originPageNum: 10, //缓存初始页数\n                    originStudentList: [] //缓存初始页面数据\n                },\n                searchedInf: \"\",\n                pageNum: 10,\n                boxHeight: \"\",\n                actionId: \"\", //这个至关重要，需要在请求的时候发出\n            }\n        },\n        methods: {\n            exportData() {\n                //这里进行请求，导出必须从后端导出\n\n            },\n\n            computingPages(totalPages) {\n                if (totalPages <= 5) //暂时先用三来代替\n                {\n                    return 10;\n                } else {\n                    return Math.ceil(totalPages / 5) * 10;//Math.ceil->向上取整\n                }\n            },\n\n            currentPage(page) {\n                console.log(this.searchedInf);\n                if(this.searchedInf === \"\")\n                {\n                    this.$request.get(\"/actInf/moreInf/page\", {\n                        params: {\n                            currentPage: page,\n                            actId: this.actionId\n                        }\n                    }).then(result => {\n                        console.log(result.data);\n                        this.studentList = result.data;\n                    }).catch(err => {\n                        console.log(err);\n                    })\n                }\n                else\n                {\n                    this.$request.get('/actInf/moreInf/search/page',{\n                        params : {\n                            searchedInf : this.searchedInf,\n                            currentPage : page,\n                            actionId : this.actionId\n                        }\n                    }).then((result) => {\n                        console.log(result.data);\n                        let middleData = result.data;\n                        this.pageNeedData.data1 = this.normalizingDate(middleData);\n                    }).catch((err) => {\n                        console.log(err);\n                    })\n                }\n            }\n        },\n        created() {\n            let screenWidth = document.documentElement.clientWidth;\n            let screenHeight = document.documentElement.clientHeight;\n            // console.log(screenHeight);\n\n            this.columnConfig[3].width = screenWidth * 0.25;//设置申请理由表格宽度\n            this.boxHeight = screenHeight * 0.8 + \"px\"; //设置本组件的高度\n\n        },\n        mounted() {\n            //下面是表格分页的设置 包括学生名单和页数\n            setTimeout(() => {\n                //下面是表格分页的设置 包括学生名单和页数\n                this.studentList = this.studentData.studentInf;\n                this.configData.originStudentList = [...this.studentList];//拷贝一份\n                this.pageNum = this.computingPages(this.studentData.studentsNum);//计算页数\n                this.configData.originPageNum = this.pageNum; //拷贝一份\n\n                this.actionId = this.studentData.studentInf[0].actionId;//设置活动Id，需要查询\n\n            }, 500); //设置时差，防止赋值失败。因为请求源是在父组件里\n\n        },\n        watch: { //实时搜索\n            searchedInf: function () {\n                let searchedInf = this.searchedInf;\n                if (searchedInf === null)//索引框为空的时候，不用请求，直接用本地缓存值\n                {\n                    console.log(this.configData.originPageNum);\n                    this.studentList = [...this.configData.originStudentList];\n                    this.pageNum = this.configData.originPageNum;\n                }\n                else\n                { //当索引框不为空的时候的请求\n                    this.$request.get(\"/actInf/moreInf/search\", {\n                        params: {\n                            actionId : this.actionId ,\n                            searchedInf: searchedInf\n                        }\n                    }).then((result) => {\n                        console.log(result.data);\n                        this.pageNum = this.computingPages(result.data.pageNum);//进行搜索页数计算\n                        this.studentList = result.data.searchedData;\n                    }).catch((err) => {\n                        console.log(err);\n                    })\n                }//else\n\n            }\n        }\n    }\n\n</script>\n\n<style scoped>\n#studentInf{\n    border: 1px solid red;\n    min-width: 25%;\n    max-width: 60%;\n    position: relative;\n}\n\n.table {\n\n}\n\n.col-2{\n    position: absolute;\n    bottom: 10px;\n    right: 4%;\n}\n\n.col-3{\n    position: absolute;\n    bottom : 10px;\n    left: 4%;\n}\n</style>"]}]}